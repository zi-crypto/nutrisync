<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NutriSync - AI Coach</title>
    <link rel="icon" type="image/png" href="/static/favicon.png">
    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <!-- Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <!-- KaTeX -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"></script>
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- MediaPipe -->
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils/drawing_utils.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js" crossorigin="anonymous"></script>
    <script src="/static/workout_coach.js"></script>
    <!-- CSS -->
    <link rel="stylesheet" href="/static/style.css">

    <!-- PostHog Analytics (key injected server-side via Jinja2) -->
    {% if posthog_api_key %}
    <script>
        !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture register register_once register_for_session unregister unregister_for_session getFeatureFlag getFeatureFlagPayload isFeatureEnabled reloadFeatureFlags updateEarlyAccessFeatureEnrollment getEarlyAccessFeatures on onFeatureFlags onSessionId getSurveys getActiveMatchingSurveys renderSurvey canRenderSurvey getNextSurveyStep identify setPersonProperties group resetGroups setPersonPropertiesForFlags resetPersonPropertiesForFlags setGroupPropertiesForFlags resetGroupPropertiesForFlags reset get_distinct_id getGroups get_session_id get_session_replay_url alias set_config startSessionRecording stopSessionRecording sessionRecordingStarted captureException loadToolbar get_property getSessionProperty createPersonProfile opt_in_capturing opt_out_capturing has_opted_in_capturing has_opted_out_capturing clear_opt_in_out_capturing debug".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);

        posthog.init('{{ posthog_api_key }}', {
            api_host: '/ingest',
            ui_host: 'https://eu.posthog.com',
            person_profiles: 'identified_only',
            capture_pageview: true,
            capture_pageleave: true,
            autocapture: true,
            disable_session_recording: true,
            loaded: function(posthog) {
                if (window.location.hostname === 'localhost') {
                    posthog.debug();
                }
            }
        });
    </script>
    {% endif %}
</head>

<body>
    <div class="chat-container">
        <header>
            <div class="logo">NutriSync</div>
            <div class="status">Online</div>
            <div class="header-right" style="display: flex; align-items: center; gap: 15px;">
                <button id="workout-tracker-toggle-btn" class="icon-btn hidden" title="Workout Tracker">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 20V10"></path>
                        <path d="M12 20V4"></path>
                        <path d="M6 20v-6"></path>
                    </svg>
                </button>
                <button id="live-coach-toggle-btn" class="icon-btn hidden" title="Live Coach">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M23 7l-7 5 7 5V7z"></path>
                        <rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect>
                    </svg>
                </button>
                <div id="profile-section" class="profile-section hidden"
                    style="display: flex; align-items: center; gap: 10px;">
                    <span id="header-username" style="font-weight: 500;">User</span>
                    <button id="settings-btn" class="icon-btn" title="Edit Profile">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="3"></circle>
                            <path
                                d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z">
                            </path>
                        </svg>
                    </button>
                </div>
            </div>
        </header>

        <div id="chat-history" class="chat-history">
            <!-- Messages will appear here -->
            <div class="message bot-message">
                Hello! I'm your NutriSync coach. How can I help you today?
            </div>
        </div>

        <div class="input-area">
            <div id="image-preview-container" class="image-preview-container" style="display: none;">
                <img id="image-preview" src="" alt="Preview">
                <button id="clear-image" class="clear-image-btn">&times;</button>
            </div>

            <input type="file" id="file-input" accept="image/*" style="display: none;">
            <button id="upload-btn" title="Upload Image">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <path
                        d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48">
                    </path>
                </svg>
            </button>

            <textarea id="user-input" placeholder="Type your message..." rows="1"></textarea>
            <button id="send-btn" title="Send">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <line x1="22" y1="2" x2="11" y2="13"></line>
                    <polygon points="22 2 15 22 11 13 2 9 22 2"></polygon>
                </svg>
            </button>
        </div>
    </div>

    <!-- Auth Overlay -->
    <div id="auth-overlay" class="auth-overlay">
        <div class="auth-box">
            <h2 id="auth-title">Welcome to NutriSync</h2>
            <p id="auth-subtitle">Sign in to continue</p>

            <form id="auth-form">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" placeholder="Enter your email" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" placeholder="Enter your password" required>
                </div>
                <button type="submit" id="auth-submit-btn">Sign In</button>
            </form>

            <div class="auth-footer">
                <span id="auth-toggle-text">Don't have an account?</span>
                <button id="auth-toggle-btn">Sign Up</button>
            </div>
            <div id="auth-message" class="auth-message"></div>
        </div>
    </div>

    <!-- Live Coach Overlay -->
    <div id="live-coach-overlay" class="auth-overlay hidden">
        <div class="auth-box wizard-box" style="width: 95%; max-width: 700px; padding: 20px;">
            <button id="close-coach-btn" class="icon-btn" style="position: absolute; top: 15px; right: 15px;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <h2 id="coach-title">NutriSync Live Coach</h2>
            <p id="coach-subtitle">Ensure your full body is visible in the camera.</p>

            <div style="text-align: center; margin-bottom: 10px;">
                <label for="coach-exercise-select" style="margin-right: 10px; color: #E2E8F0;">Exercise:</label>
                <select id="coach-exercise-select"
                    style="padding: 6px 12px; border-radius: 6px; background-color: #2D3748; color: white; border: 1px solid #4A5568;">
                    <option value="squat">Squats</option>
                    <option value="pushup">Pushups</option>
                    <option value="pullup">Pullups / Lat Pulldown</option>
                </select>
            </div>

            <div class="coach-video-container"
                style="position: relative; width: 100%; max-width: 640px; margin: 15px auto; border-radius: 8px; overflow: hidden; background: #000;">
                <video id="coach-video" class="input_video" autoplay muted playsinline style="display: none;"></video>
                <canvas id="coach-canvas" class="output_canvas" width="640" height="480"
                    style="width: 100%; display: block;"></canvas>
            </div>

            <!-- Session Stats -->
            <div id="coach-session-stats" class="coach-session-stats hidden">
                <span id="coach-session-sets">Sets logged: 0</span>
                <span id="coach-session-reps-display"></span>
            </div>

            <div class="wizard-footer" style="justify-content: center; margin-top: 20px; flex-wrap: wrap;">
                <button type="button" id="start-coach-btn">Start Tracking</button>
                <button type="button" id="stop-coach-btn" class="secondary-btn hidden">Stop</button>
                <button type="button" id="log-exercise-btn" class="coach-log-btn hidden" disabled>
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="vertical-align: middle; margin-right: 6px;">
                        <path d="M9 11l3 3L22 4"></path>
                        <path d="M21 12v7a2 2 0 01-2 2H5a2 2 0 01-2-2V5a2 2 0 012-2h11"></path>
                    </svg>
                    <span id="log-exercise-btn-text">Log Exercise</span>
                </button>
            </div>

            <!-- Toast Notification -->
            <div id="coach-toast" class="coach-toast hidden"></div>
        </div>
    </div>

    <!-- Workout Tracker Overlay -->
    <div id="workout-tracker-overlay" class="auth-overlay hidden">
        <div class="auth-box wizard-box wt-overlay-box">
            <button id="close-tracker-btn" class="icon-btn wt-close-btn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>

            <!-- Tab Bar -->
            <div class="wt-tab-bar">
                <button class="wt-tab active" data-tab="plan">ðŸ“‹ Plan</button>
                <button class="wt-tab" data-tab="progress">ðŸ“ˆ Progress</button>
                <button class="wt-tab" data-tab="volume">ðŸ”¥ Volume</button>
            </div>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 1: PLAN VIEW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <div class="wt-tab-content active" id="wt-plan-tab">
                <div class="wt-plan-header">
                    <h2 class="wt-section-title">ðŸ“‹ My Workout Plan</h2>
                    <button id="wt-regenerate-btn" class="secondary-btn wt-regen-btn" title="Ask AI to regenerate plan">ðŸ”„ Regenerate Plan</button>
                </div>

                <!-- Split Day Tabs -->
                <div id="wt-day-tabs" class="wt-day-tabs">
                    <!-- Dynamically populated -->
                </div>

                <!-- Exercise List -->
                <div id="wt-exercise-list" class="wt-exercise-list">
                    <div class="wt-empty-state">
                        <p>No workout plan yet.</p>
                        <p style="color:#8b949e;font-size:0.85rem;">Ask the AI coach to generate a plan for you, or click Regenerate Plan.</p>
                    </div>
                </div>

                <!-- Volume Summary -->
                <div id="wt-volume-summary" class="wt-volume-summary" style="display:none;"></div>
            </div>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 2: PROGRESS VIEW â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <div class="wt-tab-content" id="wt-progress-tab">
                <div class="wt-progress-header">
                    <h2 class="wt-section-title">ðŸ“ˆ Progressive Overload Tracker</h2>
                    <select id="wt-progress-weeks" class="form-select wt-small-select">
                        <option value="4">4 weeks</option>
                        <option value="8" selected>8 weeks</option>
                        <option value="12">12 weeks</option>
                        <option value="24">24 weeks</option>
                    </select>
                </div>

                <div class="wt-exercise-filter">
                    <label>Exercise:</label>
                    <select id="wt-exercise-select" class="form-select wt-exercise-dropdown">
                        <option value="">All Exercises</option>
                    </select>
                </div>

                <!-- Single Exercise View -->
                <div id="wt-single-exercise-view" style="display:none;">
                    <div class="wt-chart-card">
                        <h3 class="wt-chart-title">Estimated 1RM Trend</h3>
                        <canvas id="wt-e1rm-chart" height="200"></canvas>
                    </div>
                    <div class="wt-chart-card">
                        <h3 class="wt-chart-title">Volume Load Trend</h3>
                        <canvas id="wt-volume-chart" height="200"></canvas>
                    </div>
                    <div id="wt-session-history" class="wt-session-history"></div>
                    <div id="wt-pr-records" class="wt-pr-records"></div>
                </div>

                <!-- All Exercises View -->
                <div id="wt-all-exercises-view">
                    <div id="wt-all-exercises-list" class="wt-all-exercises-list">
                        <div class="wt-empty-state">
                            <p>No exercise data yet.</p>
                            <p style="color:#8b949e;font-size:0.85rem;">Start logging sets via the AI coach to see your progress.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• TAB 3: VOLUME HEATMAP â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
            <div class="wt-tab-content" id="wt-volume-tab">
                <div class="wt-volume-header">
                    <h2 class="wt-section-title">ðŸ”¥ Weekly Muscle Volume</h2>
                    <div class="wt-week-nav">
                        <button id="wt-week-prev" class="wt-week-btn">â—€</button>
                        <span id="wt-week-label">This Week</span>
                        <button id="wt-week-next" class="wt-week-btn">â–¶</button>
                    </div>
                </div>

                <div id="wt-muscle-bars" class="wt-muscle-bars">
                    <div class="wt-empty-state">
                        <p>No volume data yet.</p>
                        <p style="color:#8b949e;font-size:0.85rem;">Log exercise sets to see your weekly muscle volume.</p>
                    </div>
                </div>

                <div class="wt-volume-legend">
                    <span class="wt-legend-item"><span class="wt-legend-swatch wt-legend-done"></span> Done</span>
                    <span class="wt-legend-item"><span class="wt-legend-swatch wt-legend-remaining"></span> Remaining</span>
                    <span class="wt-legend-info">Target based on experience level + goal</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Onboarding Wizard -->
    <div id="onboarding-overlay" class="auth-overlay hidden">
        <div class="auth-box wizard-box">
            <h2 id="wizard-title">Let's get to know you</h2>
            <p id="wizard-subtitle">Step 1 of 4</p>

            <form id="onboarding-form">
                <!-- Step 1: Basics -->
                <div class="wizard-step" data-step="1">
                    <div class="form-group">
                        <label for="profile-name">What should we call you?</label>
                        <input type="text" id="profile-name" placeholder="Your Name" required>
                    </div>
                </div>

                <!-- Step 2: Body Stats -->
                <div class="wizard-step hidden" data-step="2">
                    <div class="form-group">
                        <label for="profile-gender">Gender</label>
                        <select id="profile-gender" class="form-select">
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="profile-dob">Date of Birth</label>
                        <input type="date" id="profile-dob" required>
                    </div>
                    <div class="form-group-row">
                        <div class="form-group">
                            <label for="profile-height">Height (cm)</label>
                            <input type="number" id="profile-height" placeholder="175" required>
                        </div>
                        <div class="form-group">
                            <label for="profile-weight">Weight (kg)</label>
                            <input type="number" id="profile-weight" placeholder="70" required>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Goals -->
                <div class="wizard-step hidden" data-step="3">
                    <div class="form-group">
                        <label for="profile-goal">Fitness Goal</label>
                        <select id="profile-goal" class="form-select">
                            <option value="Lose Weight">Lose Weight</option>
                            <option value="Build Muscle">Build Muscle</option>
                            <option value="Maintain">Maintain</option>
                            <option value="Improve Endurance">Improve Endurance</option>
                        </select>
                    </div>
                    <div class="form-group" id="target-weight-container">
                        <label for="profile-target-weight">Target Weight (kg)</label>
                        <input type="number" id="profile-target-weight" placeholder="70">
                    </div>
                    <div class="form-group">
                        <label for="profile-experience">Experience Level</label>
                        <select id="profile-experience" class="form-select">
                            <option value="Beginner">Beginner (0-1 years)</option>
                            <option value="Intermediate">Intermediate (1-3 years)</option>
                            <option value="Advanced">Advanced (3+ years)</option>
                        </select>
                    </div>
                </div>

                <!-- Step 4: Logistics -->
                <div class="wizard-step hidden" data-step="4">

                    <div class="form-group">
                        <label for="profile-days">Workout Days / Week</label>
                        <input type="number" id="profile-days" min="1" max="7" value="3">
                    </div>
                </div>

                <!-- Step 5: Sport & Activity -->
                <div class="wizard-step hidden" data-step="5">
                    <div class="form-group">
                        <label for="profile-sport">Main Activity / Sport</label>
                        <select id="profile-sport" class="form-select">
                            <option value="Gym">Gym / Bodybuilding</option>
                            <option value="Running">Running</option>
                            <option value="Swimming">Swimming</option>
                            <option value="Cycling">Cycling</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>

                    <!-- Gym-Specific: Split Editor -->
                    <div id="gym-options">
                        <div class="form-group">
                            <label for="profile-split-template">Workout Split Template</label>
                            <select id="profile-split-template" class="form-select">
                                <option value="PPL">Push / Pull / Legs</option>
                                <option value="Bro Split">Bro Split (Body Parts)</option>
                                <option value="Upper Lower">Upper / Lower</option>
                                <option value="Full Body">Full Body</option>
                                <option value="Arnold Split">Arnold Split</option>
                                <option value="PPL x2">PPL x2 (6-Day)</option>
                                <option value="Custom">Custom</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Customize Your Schedule:</label>
                            <div id="split-editor-container"
                                style="display: grid; grid-template-rows: repeat(4, auto); grid-auto-flow: column; gap: 10px; margin-top: 8px;">
                                <!-- Dynamic Inputs will be injected here -->
                            </div>
                            <button type="button" id="add-split-day-btn" class="secondary-btn"
                                style="width: 100%; margin-top: 8px; font-size: 0.85rem; padding: 8px;">+ Add
                                Day</button>
                        </div>

                        <div class="form-group">
                            <label for="profile-equipment">Equipment Access</label>
                            <select id="profile-equipment" class="form-select">
                                <option value="Gym">Full Gym</option>
                                <option value="Home">Home (Dumbbells/Bands)</option>
                                <option value="Bodyweight">Bodyweight Only</option>
                            </select>
                        </div>

                        <div class="form-group" id="equipment-chips-section">
                            <label>Your Specific Equipment <span style="font-weight:400;color:rgba(255,255,255,0.5);font-size:0.85rem;">(select what you have)</span></label>
                            <div class="equip-select-all-row">
                                <button type="button" id="equip-select-all-btn" class="secondary-btn" style="font-size:0.8rem;padding:6px 14px;width:auto;">âœ… Select All</button>
                                <button type="button" id="equip-deselect-all-btn" class="secondary-btn" style="font-size:0.8rem;padding:6px 14px;width:auto;">Clear All</button>
                            </div>
                            <div id="equipment-chips-container" class="equipment-chips-container">
                                <!-- Chips will be injected by JS -->
                            </div>
                            <div class="equip-custom-row" style="margin-top:10px;display:flex;gap:8px;">
                                <input type="text" id="equip-custom-input" placeholder="Add custom equipment..." style="flex:1;">
                                <button type="button" id="equip-custom-add-btn" class="secondary-btn" style="padding:8px 14px;width:auto;font-size:0.85rem;">+ Add</button>
                            </div>
                        </div>

                        <div class="form-group">
                            <label>1RM (1 Rep Max) Records (Optional)</label>
                            <p
                                style="color: rgba(255,255,255,0.7); font-size: 0.85rem; margin-top: 0; margin-bottom: 8px;">
                                Know your strength? Log it here. If not, choose a weight you can perform for 8 reps with
                                1â€“2 reps in reserve.
                            </p>
                            <div id="rm-editor-container" style="display: flex; flex-direction: column; gap: 10px;">
                                <!-- RM inputs will be injected here -->
                            </div>
                            <button type="button" id="add-rm-btn" class="secondary-btn"
                                style="width: 100%; margin-top: 8px; font-size: 0.85rem; padding: 8px;">+ Add 1RM
                                Record</button>
                        </div>
                    </div>
                </div>

                <!-- Step 6: Nutrition -->
                <div class="wizard-step hidden" data-step="6">
                    <div class="form-group">
                        <label for="profile-diet-type">Typical Diet Type</label>
                        <select id="profile-diet-type" class="form-select">
                            <option value="Balanced">Balanced / Standard</option>
                            <option value="Low Carb">Low Carb</option>
                            <option value="Keto">Keto</option>
                            <option value="High Protein">High Protein</option>
                            <option value="Vegan">Vegan</option>
                            <option value="Vegetarian">Vegetarian</option>
                            <option value="Paleo">Paleo</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="profile-calories">Typical Daily Calories (Estimate)</label>
                        <input type="number" id="profile-calories" placeholder="e.g. 2000" required>
                        <small style="color: rgba(255,255,255,0.5); font-size: 0.8rem;">We'll estimate this based on
                            your stats if unsure.</small>
                    </div>
                    <div class="form-group">
                        <label for="profile-allergies">Allergies / Intolerances</label>
                        <input type="text" id="profile-allergies" placeholder="e.g. Peanuts, Gluten, Dairy (Optional)">
                    </div>
                </div>

                <div class="wizard-footer">
                    <button type="button" id="wizard-back-btn" class="secondary-btn hidden">Back</button>
                    <button type="button" id="wizard-next-btn">Next</button>
                    <button type="submit" id="wizard-submit-btn" class="hidden">Finish</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Supabase JS -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script src="/static/script.js?v=2"></script>
</body>

</html>